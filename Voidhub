-- Services
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Updated Games List (Bee Swarm Simulator uses new loadstring)
local games = {
    {
        name = "Blade Ball",
        urls = {"https://raw.githubusercontent.com/darkieebee/Beta/main/Bladeball"}
    },
    {
        name = "99 Nights in the Forest",
        urls = {"https://raw.githubusercontent.com/darkieebee/VoidHub/main/99%20nights"}
    },
    {
        name = "Bee Swarm Simulator",
        urls = {""}, -- Placeholder - we'll use direct loadstring below
        loadstring = 'loadstring(game:HttpGet("https://raw.githubusercontent.com/darkieebee/VoidHub/refs/heads/main/beeswam%20voidhub.txt"))()'
    }
}

-- Safe HttpGet with Retries
local function safeHttpGet(url, retries)
    retries = retries or 3
    for i = 1, retries do
        local success, result = pcall(game.HttpGet, game, url)
        if success and result and #result > 10 then
            return true, result
        end
        wait(0.5)
    end
    return false, nil
end

-- Load Script Function (Supports both URLs and direct loadstring)
local function loadGameScript(gameData)
    if gameData.loadstring then
        local success, err = pcall(function()
            loadstring(gameData.loadstring)()
        end)
        if success then
            print("Script Hub: Loaded " .. gameData.name .. " via loadstring successfully!")
            return true
        else
            warn("Loadstring error: " .. tostring(err))
        end
    else
        for _, url in ipairs(gameData.urls) do
            local success, code = safeHttpGet(url)
            if success then
                local loadSuccess, err = pcall(function()
                    loadstring(code)()
                end)
                if loadSuccess then
                    print("Script Hub: Loaded " .. gameData.name .. " successfully!")
                    return true
                else
                    warn("Load error: " .. tostring(err))
                end
            end
        end
        warn("Script Hub: All URLs failed - Check URLs or executor")
    end
    return false
end

-- Copy to Clipboard Function
local function copyToClipboard(text)
    if setclipboard then
        setclipboard(text)
    elseif syn and syn.write_clipboard then
        syn.write_clipboard(text)
    else
        warn("Clipboard not supported by this executor")
    end
end

-- Create Enhanced Modern UI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ScriptHubGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 300)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

local glassEffect = Instance.new("UIStroke")
glassEffect.Thickness = 2
glassEffect.Color = Color3.fromRGB(100, 100, 120)
glassEffect.Transparency = 0.3
glassEffect.Parent = mainFrame

local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, 60)
header.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
header.BorderSizePixel = 0
header.Parent = mainFrame

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 12)
headerCorner.Parent = header

local title = Instance.new("TextLabel")
title.Size = UDim2.new(0.6, 0, 0.5, 0)
title.Position = UDim2.new(0, 15, 0, 5)
title.BackgroundTransparency = 1
title.Text = "Darkiee's Hub"
title.TextColor3 = Color3.fromRGB(220, 220, 230)
title.TextSize = 20
title.Font = Enum.Font.GothamBold
title.Parent = header

local socialFrame = Instance.new("Frame")
socialFrame.Size = UDim2.new(0.35, 0, 0.8, 0)
socialFrame.Position = UDim2.new(0.65, 0, 0.1, 0)
socialFrame.BackgroundTransparency = 1
socialFrame.Parent = header

local discordBtn = Instance.new("TextButton")
discordBtn.Size = UDim2.new(1, 0, 0.45, 0)
discordBtn.Position = UDim2.new(0, 0, 0, 5)
discordBtn.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
discordBtn.Text = "Discord"
discordBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
discordBtn.TextSize = 14
discordBtn.Font = Enum.Font.Gotham
discordBtn.Parent = socialFrame
discordBtn.MouseButton1Click:Connect(function()
    copyToClipboard("https://discord.gg/TxYjvvapfA")
    print("Copied Discord link to clipboard!")
end)

local youtubeBtn = Instance.new("TextButton")
youtubeBtn.Size = UDim2.new(1, 0, 0.45, 0)
youtubeBtn.Position = UDim2.new(0, 0, 0.55, 0)
youtubeBtn.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
youtubeBtn.Text = "YouTube"
youtubeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
youtubeBtn.TextSize = 14
youtubeBtn.Font = Enum.Font.Gotham
youtubeBtn.Parent = socialFrame
youtubeBtn.MouseButton1Click:Connect(function()
    copyToClipboard("https://www.youtube.com/@HerDarkiee")
    print("Copied YouTube link to clipboard!")
end)

local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, -20, 1, -70)
contentFrame.Position = UDim2.new(0, 10, 0, 70)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

local uiListLayout = Instance.new("UIListLayout")
uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder
uiListLayout.Padding = UDim.new(0, 12)
uiListLayout.Parent = contentFrame

local uiPadding = Instance.new("UIPadding")
uiPadding.PaddingTop = UDim.new(0, 10)
uiPadding.PaddingLeft = UDim.new(0, 10)
uiPadding.Parent = contentFrame

-- Game Buttons with Enhanced Design
for i, gameData in ipairs(games) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -20, 0, 60)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    btn.BorderSizePixel = 0
    btn.Text = gameData.name
    btn.TextColor3 = Color3.fromRGB(230, 230, 240)
    btn.TextSize = 16
    btn.Font = Enum.Font.Gotham
    btn.LayoutOrder = i
    btn.Parent = contentFrame

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 10)
    btnCorner.Parent = btn

    local btnStroke = Instance.new("UIStroke")
    btnStroke.Thickness = 2
    btnStroke.Color = Color3.fromRGB(120, 120, 140)
    btnStroke.Transparency = 0.4
    btnStroke.Parent = btn

    btn.MouseEnter:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
        btnStroke.Color = Color3.fromRGB(150, 150, 170)
        TweenService:Create(btn, TweenInfo.new(0.2), {Size = UDim2.new(1, -10, 0, 65)}):Play()
    end)
    btn.MouseLeave:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
        btnStroke.Color = Color3.fromRGB(120, 120, 140)
        TweenService:Create(btn, TweenInfo.new(0.2), {Size = UDim2.new(1, -20, 0, 60)}):Play()
    end)

    btn.MouseButton1Click:Connect(function()
        screenGui:Destroy()
        loadGameScript(gameData)
    end)
end

-- Smooth Slide-In Animation
mainFrame.Position = UDim2.new(0.5, -150, 1, 0)
TweenService:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = UDim2.new(0.5, -150, 0.5, -150)}):Play()

print("Darkiee's Hub GUI Loaded! Click a game to load script (GUI auto-destroys) - " .. os.date("%I:%M %p EST, %B %d, %Y"))
